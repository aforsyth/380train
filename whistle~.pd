#N canvas 506 23 857 827 10;
#X obj 42 278 inlet bang;
#X obj 48 1084 outlet~ whistle;
#X text 23 134 Creation argument \$1: Fundamental frequency f1 (defaults
to 750 Hz);
#X text 18 213 Blow whistle twice;
#X text 22 25 [whistle~] is a model of a steam whistle based on white
noise source that is subjected to a series of harmonically tuned bandpass
filters. The model is based on the observation that a steam whistle
\, like a flute \, behaves as a pipe open at both ends and therefore
produces all harmonics f1*N. The whistle blows whenever it receives
a [bang( at its inlet.;
#X text 22 178 No dependencies;
#X msg 43 314 bang;
#X obj 738 506 noise~;
#X obj 40 739 *~ 1;
#X obj 464 401 fcomp~ 1 0;
#X obj 49 1053 clip~ -1 1;
#X obj 49 1029 *~ 10;
#X obj 35 684 vline~;
#X obj 70 885 vline~;
#X obj 45 937 *~;
#X obj 464 472 fcomp~ 1.25 3;
#X obj 464 539 fcomp~ 1.5 3;
#X obj 464 608 fcomp~ 1.75 2;
#X obj 464 676 fcomp~ 2 -2;
#X obj 463 743 fcomp~ 2.25 -6;
#X obj 463 811 fcomp~ 2.5 -5;
#X obj 463 877 fcomp~ 3 1;
#X text 463 314 bank of filtered frequency components modeled after
real steam whistle \, tweaked to sound nice take a bunch of frequency
multiples of the base frequency \, at different amplitudes \, to get
a steam whistle sound;
#X text 719 469 set global q-factor;
#X text 733 553 global noise source;
#X text 95 317 bang to whistle;
#X text 44 576 frequency: starts low \, goes up \, stays there for
a while \, and comes back down a little;
#X text 91 1028 global amplification;
#X obj 45 959 *~;
#X obj 137 922 randomrange 0.7 1;
#X obj 43 336 t b b;
#X obj 734 404 r setup;
#X text 116 949 overall amplitude factor selected randomly from [0.7
\, 1];
#X text 226 458 attack duration;
#X text 36 458 sustain duration;
#X msg 36 643 320;
#X msg 78 642 355 \$1;
#X obj 160 642 +;
#X obj 39 429 t b b;
#X obj 58 836 r go;
#X msg 58 858 0;
#X text 134 791 amplitude envelope: closely correlated with frequency
;
#X msg 123 851 1 \$1;
#X obj 210 851 +;
#X obj 19 481 randomrange 2000 4000;
#X msg 734 426 300;
#X msg 210 873 0 300 \$1;
#X msg 160 664 345 300 \$1;
#X obj 220 480 randomrange 500 1000;
#X text 114 984 remove the high frequency noise (it doesn't sound airy)
the overall sound is better without it;
#X obj 45 990 lop~ 1500;
#X text 123 1053 let's not deafen ourselves, f 29;
#X obj 43 387 s \$0-go;
#X obj 102 387 s \$0-setup;
#X obj 19 503 s \$0-sustaindur;
#X obj 220 502 s \$0-attackdur;
#X obj 39 407 r \$0-go;
#X obj 738 528 s~ \$0-noise;
#X obj 734 448 s \$0-qfactor;
#X obj 40 761 s~ \$0-basefreq;
#X obj 464 379 r~ \$0-noise;
#X obj 541 380 r~ \$0-basefreq;
#X obj 638 379 r \$0-qfactor;
#X obj 464 450 r~ \$0-noise;
#X obj 551 448 r~ \$0-basefreq;
#X obj 645 450 r \$0-qfactor;
#X obj 464 517 r~ \$0-noise;
#X obj 540 517 r~ \$0-basefreq;
#X obj 637 517 r \$0-qfactor;
#X obj 464 586 r~ \$0-noise;
#X obj 545 586 r~ \$0-basefreq;
#X obj 643 585 r \$0-qfactor;
#X obj 463 721 r~ \$0-noise;
#X obj 540 721 r~ \$0-basefreq;
#X obj 638 720 r \$0-qfactor;
#X obj 463 789 r~ \$0-noise;
#X obj 540 788 r~ \$0-basefreq;
#X obj 639 788 r \$0-qfactor;
#X obj 463 855 r~ \$0-noise;
#X obj 539 856 r~ \$0-basefreq;
#X obj 641 858 r \$0-qfactor;
#X obj 123 829 r \$0-attackdur;
#X obj 221 828 r \$0-sustaindur;
#X obj 45 813 catch~ \$0-out;
#X obj 463 899 throw~ \$0-out;
#X obj 463 833 throw~ \$0-out;
#X obj 463 765 throw~ \$0-out;
#X obj 464 698 throw~ \$0-out;
#X obj 464 630 throw~ \$0-out;
#X obj 464 561 throw~ \$0-out;
#X obj 464 494 throw~ \$0-out;
#X obj 464 423 throw~ \$0-out;
#X obj 36 621 r \$0-go;
#X obj 89 618 r \$0-attackdur;
#X obj 180 614 r \$0-sustaindur;
#X obj 137 900 r \$0-setup;
#X obj 464 654 r~ \$0-noise;
#X obj 540 654 r~ \$0-basefreq;
#X obj 635 654 r \$0-qfactor;
#X connect 0 0 6 0;
#X connect 6 0 30 0;
#X connect 7 0 57 0;
#X connect 8 0 59 0;
#X connect 9 0 91 0;
#X connect 10 0 1 0;
#X connect 11 0 10 0;
#X connect 12 0 8 0;
#X connect 13 0 14 1;
#X connect 14 0 28 0;
#X connect 15 0 90 0;
#X connect 16 0 89 0;
#X connect 17 0 88 0;
#X connect 18 0 87 0;
#X connect 19 0 86 0;
#X connect 20 0 85 0;
#X connect 21 0 84 0;
#X connect 28 0 50 0;
#X connect 29 0 28 1;
#X connect 30 0 52 0;
#X connect 30 1 53 0;
#X connect 31 0 45 0;
#X connect 35 0 12 0;
#X connect 36 0 12 0;
#X connect 37 0 47 0;
#X connect 38 0 44 0;
#X connect 38 1 48 0;
#X connect 39 0 40 0;
#X connect 40 0 13 0;
#X connect 42 0 13 0;
#X connect 43 0 46 0;
#X connect 44 0 54 0;
#X connect 45 0 58 0;
#X connect 46 0 13 0;
#X connect 47 0 12 0;
#X connect 48 0 55 0;
#X connect 50 0 11 0;
#X connect 56 0 38 0;
#X connect 60 0 9 0;
#X connect 61 0 9 1;
#X connect 62 0 9 2;
#X connect 63 0 15 0;
#X connect 64 0 15 1;
#X connect 65 0 15 2;
#X connect 66 0 16 0;
#X connect 67 0 16 1;
#X connect 68 0 16 2;
#X connect 69 0 17 0;
#X connect 70 0 17 1;
#X connect 71 0 17 2;
#X connect 72 0 19 0;
#X connect 73 0 19 1;
#X connect 74 0 19 2;
#X connect 75 0 20 0;
#X connect 76 0 20 1;
#X connect 77 0 20 2;
#X connect 78 0 21 0;
#X connect 79 0 21 1;
#X connect 80 0 21 2;
#X connect 81 0 42 0;
#X connect 81 0 43 1;
#X connect 82 0 43 0;
#X connect 83 0 14 0;
#X connect 92 0 35 0;
#X connect 93 0 36 0;
#X connect 93 0 37 1;
#X connect 94 0 37 0;
#X connect 95 0 29 0;
#X connect 96 0 18 0;
#X connect 97 0 18 1;
#X connect 98 0 18 2;
