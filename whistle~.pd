#N canvas 506 23 857 827 10;
#X obj 25 220 inlet bang;
#X obj 48 1219 outlet~ whistle;
#X text 23 134 Creation argument \$1: Fundamental frequency f1 (defaults
to 750 Hz);
#X text 17 198 Blow whistle twice;
#X text 22 25 [whistle~] is a model of a steam whistle based on white
noise source that is subjected to a series of harmonically tuned bandpass
filters. The model is based on the observation that a steam whistle
\, like a flute \, behaves as a pipe open at both ends and therefore
produces all harmonics f1*N. The whistle blows whenever it receives
a [bang( at its inlet.;
#X text 22 178 No dependencies;
#X msg 43 314 bang;
#X obj 738 506 noise~;
#X obj 38 806 *~ 1;
#X obj 49 1188 clip~ -1 1;
#X obj 49 1164 *~ 10;
#X obj 28 777 vline~;
#X obj 70 1020 vline~;
#X obj 45 1072 *~;
#X text 463 314 bank of filtered frequency components modeled after
real steam whistle \, tweaked to sound nice take a bunch of frequency
multiples of the base frequency \, at different amplitudes \, to get
a steam whistle sound;
#X text 719 469 set global q-factor;
#X text 733 553 global noise source;
#X text 85 314 bang to whistle;
#X text 32 551 frequency: starts low \, goes up \, stays there for
a while \, and comes back down a little;
#X text 91 1163 global amplification;
#X obj 45 1094 *~;
#X obj 137 1057 randomrange 0.7 1;
#X obj 734 404 r setup;
#X text 116 1084 overall amplitude factor selected randomly from [0.7
\, 1];
#X text 226 458 attack duration;
#X text 36 458 sustain duration;
#X obj 219 685 +;
#X obj 39 429 t b b;
#X obj 58 971 r go;
#X msg 58 993 0;
#X text 134 926 amplitude envelope: closely correlated with frequency
;
#X msg 123 986 1 \$1;
#X obj 210 986 +;
#X msg 734 426 300;
#X msg 210 1008 0 300 \$1;
#X obj 220 480 randomrange 500 1000;
#X text 114 1119 remove the high frequency noise (it doesn't sound
airy) the overall sound is better without it;
#X obj 45 1125 lop~ 1500;
#X text 123 1188 let's not deafen ourselves, f 29;
#X obj 43 387 s \$0-go;
#X obj 102 387 s \$0-setup;
#X obj 19 503 s \$0-sustaindur;
#X obj 220 502 s \$0-attackdur;
#X obj 39 407 r \$0-go;
#X obj 738 528 s~ \$0-noise;
#X obj 734 448 s \$0-qfactor;
#X obj 38 828 s~ \$0-basefreq;
#X obj 464 379 r~ \$0-noise;
#X obj 541 380 r~ \$0-basefreq;
#X obj 638 379 r \$0-qfactor;
#X obj 464 450 r~ \$0-noise;
#X obj 551 448 r~ \$0-basefreq;
#X obj 645 450 r \$0-qfactor;
#X obj 464 517 r~ \$0-noise;
#X obj 540 517 r~ \$0-basefreq;
#X obj 637 517 r \$0-qfactor;
#X obj 464 586 r~ \$0-noise;
#X obj 545 586 r~ \$0-basefreq;
#X obj 643 585 r \$0-qfactor;
#X obj 463 721 r~ \$0-noise;
#X obj 540 721 r~ \$0-basefreq;
#X obj 638 720 r \$0-qfactor;
#X obj 123 964 r \$0-attackdur;
#X obj 221 963 r \$0-sustaindur;
#X obj 45 948 catch~ \$0-out;
#X obj 463 765 throw~ \$0-out;
#X obj 464 698 throw~ \$0-out;
#X obj 464 630 throw~ \$0-out;
#X obj 464 561 throw~ \$0-out;
#X obj 464 494 throw~ \$0-out;
#X obj 464 423 throw~ \$0-out;
#X obj 133 631 r \$0-attackdur;
#X obj 251 651 r \$0-sustaindur;
#X obj 137 1035 r \$0-setup;
#X obj 464 654 r~ \$0-noise;
#X obj 540 654 r~ \$0-basefreq;
#X obj 635 654 r \$0-qfactor;
#X obj 464 539 fcomp~ 1 0;
#X obj 464 608 fcomp~ 1.6667 -7;
#X obj 464 676 fcomp~ 1.8333 -9;
#X obj 463 743 fcomp~ 2 -8;
#X obj 49 607 f \$1;
#X obj 49 629 sel 0;
#X msg 49 651 750;
#X obj 46 677 f;
#X obj 28 744 - 10;
#X obj 134 692 pack f f;
#X obj 43 336 t b b;
#X obj 49 585 r \$0-setup;
#X obj 1 585 r \$0-go;
#X obj 88 703 f;
#X obj 46 712 f;
#X obj 133 653 t b f;
#X obj 219 707 t b f;
#X obj 184 733 f;
#X obj 247 799 pack f f f;
#X obj 184 755 t f f;
#X obj 229 773 - 30;
#X obj 464 472 fcomp~ 0.8333 0;
#X obj 464 401 fcomp~ 0.6667 4;
#X obj 19 481 randomrange 1000 2000;
#X obj 128 293 delay;
#X obj 145 269 randomrange 3300 4000;
#X obj 123 246 t b b;
#X connect 0 0 6 0;
#X connect 0 0 103 0;
#X connect 6 0 87 0;
#X connect 7 0 44 0;
#X connect 8 0 46 0;
#X connect 9 0 1 0;
#X connect 10 0 9 0;
#X connect 11 0 8 0;
#X connect 12 0 13 1;
#X connect 13 0 20 0;
#X connect 20 0 37 0;
#X connect 21 0 20 1;
#X connect 22 0 33 0;
#X connect 26 0 93 0;
#X connect 27 0 100 0;
#X connect 27 1 35 0;
#X connect 28 0 29 0;
#X connect 29 0 12 0;
#X connect 31 0 12 0;
#X connect 32 0 34 0;
#X connect 33 0 45 0;
#X connect 34 0 12 0;
#X connect 35 0 42 0;
#X connect 37 0 10 0;
#X connect 43 0 27 0;
#X connect 47 0 99 0;
#X connect 48 0 99 1;
#X connect 49 0 99 2;
#X connect 50 0 98 0;
#X connect 51 0 98 1;
#X connect 52 0 98 2;
#X connect 53 0 77 0;
#X connect 54 0 77 1;
#X connect 55 0 77 2;
#X connect 56 0 78 0;
#X connect 57 0 78 1;
#X connect 58 0 78 2;
#X connect 59 0 80 0;
#X connect 60 0 80 1;
#X connect 61 0 80 2;
#X connect 62 0 31 0;
#X connect 62 0 32 1;
#X connect 63 0 32 0;
#X connect 64 0 13 0;
#X connect 71 0 92 0;
#X connect 71 0 26 1;
#X connect 72 0 26 0;
#X connect 73 0 21 0;
#X connect 74 0 79 0;
#X connect 75 0 79 1;
#X connect 76 0 79 2;
#X connect 77 0 68 0;
#X connect 78 0 67 0;
#X connect 79 0 66 0;
#X connect 80 0 65 0;
#X connect 81 0 82 0;
#X connect 82 0 83 0;
#X connect 82 1 84 0;
#X connect 83 0 84 0;
#X connect 84 0 91 1;
#X connect 84 0 90 1;
#X connect 84 0 94 1;
#X connect 85 0 11 0;
#X connect 86 0 11 0;
#X connect 87 0 39 0;
#X connect 87 1 40 0;
#X connect 88 0 81 0;
#X connect 89 0 91 0;
#X connect 90 0 86 0;
#X connect 91 0 85 0;
#X connect 92 0 90 0;
#X connect 92 1 86 1;
#X connect 93 0 94 0;
#X connect 93 1 95 2;
#X connect 94 0 96 0;
#X connect 95 0 11 0;
#X connect 96 0 95 0;
#X connect 96 1 97 0;
#X connect 97 0 95 1;
#X connect 98 0 69 0;
#X connect 99 0 70 0;
#X connect 100 0 41 0;
#X connect 101 0 6 0;
#X connect 102 0 101 1;
#X connect 103 0 101 0;
#X connect 103 1 102 0;
